# REDIRECT BOT

## Что может бот:
Бот принимает ссылки и создаёт для них другие ссылки с редиректом. Зачем это? А чтобы внутренние боты Telegram не замечали жесткий спам. При редиректе добавляется JS код, который отсеивает ботов. И вот внутренний бот Telegram хочет перейти по ссылочке, чтобы посмотреть спамят ли одним и тем же ресурсом или нет, а ему не дают глянуть, куда же там редирект ведёт. Вот и вся магия защиты чьих-то рассылок в Telegram'e.
Бот, по традиции, работает в комплексе с Django проектом.

## Установка и запуск
1) установить зависимости `pip install -r requirements.txt`
2) Создать файл `.env` и записать в него свои значения переменных (для примера в проекте лежит файл `env`)
3) Получить файл сессии, путём единоразового запуска `bot_authorization.py`
4) Запуск бота осуществляется файлом `main.py`

### Структура проекта
* `setting/` - настройки бота;
* `keyboards/` - клавиатуры и кнопки;
* `filters/` - фильтры для обработчиков апдейтов;
* `handlers/` - обработчики апдейтов;
* `secondary_functions/` - вспомогательные функции;
* `bot_objects/` - "объекты бота" - это классы, которые охватывают различные области работы бота и реализуют функционал в этих самых областях.

### Параметры, необходимые для работы бота
1) TOKEN бота
2) API_ID
3) API_HASH
4) BASE_HOST_URL - это адрес, где у нас развёрнут проект Django с админкой(https://your_ads_or_IP/ - не забываем слэш в конце)

## В бота добавлен скрипт, который позволяет восстановить его после сноса
Обращаю внимание, что бот должен быть развернут в докер контейнере!
Для работы скрипта необходимо:
* положить в корень проекта SSH ключ с названием ```redit_bot_ssh_key```
* скопировать публичный ключ ```redit_bot_ssh_key.pub``` на хост командой ```ssh-copy-id -i ./redit_bot_ssh_key.pub user@host```
* записать в bot_restart.json необходимые данные (для пример в проекте лежит bot_restart_example.json)
* выполнить команду ```fab fenix```